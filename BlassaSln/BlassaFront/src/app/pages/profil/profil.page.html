<app-menu></app-menu>

<ion-content class="ion-padding">
  <ion-label class="title">Profile</ion-label>
  <ion-row style="margin: auto; margin-left: 30px; margin-top: 10px; float: right;">
    <ion-button shape="round" id="editProfile-content">Modifier</ion-button>
  </ion-row>
  <ion-grid>
    <ion-col size="auto">
        <ion-row class="ion-padding ion-justify-content-center">
          <ion-avatar style="width: 100px; height: 100px;">
            <img alt="Silhouette of a person's head" src={{user?.imgUrl}} />
          </ion-avatar>
        </ion-row>
        <ion-row class="ion-justify-content-center" style="width: 100%;">
          <ion-label class="nom">{{user?.nom}}</ion-label>
        </ion-row>
        <ion-row class="ion-justify-content-center" >
          <ion-label class="role" *ngIf="user?.prefs.passager == false"> Conducteur</ion-label>
          <ion-label class="role" *ngIf="user?.prefs.passager == true" > Passager</ion-label>
          <ion-icon *ngIf="user?.sexe=='f'" name="female-outline"></ion-icon>
          <ion-icon *ngIf="user?.sexe=='m'" name="male-outline"></ion-icon>
        </ion-row>
    </ion-col>
    <ion-col size="auto">
      <ion-row>
        <ion-label class="font1">Informations personnelles</ion-label>
        <ion-card style="width: 100%;">
          <ion-list>
            <ion-item>
              <ion-label class="font2">{{user?.email}}</ion-label>
            </ion-item>
            <ion-item>
              <ion-label class="font2" >Sim : {{user?.tel1}}</ion-label>
            </ion-item>
            <ion-item *ngIf="user?.date_Naissance!=null">
              <ion-label class="font2">{{user?.date_Naissance | date}}</ion-label>
            </ion-item>
            <ion-item lines="none">
              <ion-label class="font2">{{user?.description}}</ion-label>
            </ion-item>
          </ion-list>
        </ion-card>
      </ion-row>
    </ion-col>
  </ion-grid>
  <ion-grid>
    <ion-row>
      <ion-label class="font1">Préférences</ion-label>
      <ion-card style="width: 100%;">
        <ion-list>
          <ion-item>
            <ion-grid>
              <ion-row>
                <ion-label>Reservation</ion-label>
              </ion-row>
              <ion-row>
                <ion-label style="margin: auto;">Manuelle</ion-label> <ion-toggle (click)="toggleResMode()" [(ngModel)]="modeRes" style="margin: auto;"></ion-toggle><ion-label style="margin: auto;">Instantanee</ion-label>
              </ion-row>
            </ion-grid>
          </ion-item>
          <ion-item button detail="true" routerLink="/preferences">
            <ion-label>Préférences du voyage</ion-label>
          </ion-item>
          <ion-item button detail="true" lines="none" routerLink="/verification-profil">
            <ion-label>Vérification du profil</ion-label>
          </ion-item>
        </ion-list>
      </ion-card>
    </ion-row>
    <ion-row>
      <ion-label class="font1">Mes véhicules</ion-label>
      <ion-fab horizontal="end" *ngIf="user?.vehicules.length < 3">
        <ion-fab-button routerLink="/add-car" >
          <ion-icon name="add"></ion-icon>
        </ion-fab-button>
      </ion-fab>
    </ion-row>
    <app-car-card 
    [car1]="user?.vehicules[0]"
    [car2]="user?.vehicules[1]"
    [car3]="user?.vehicules[2]"
    ></app-car-card>
  </ion-grid>
</ion-content>
<!-- 
<ion-modal trigger="preferences-content" (willDismiss)="onWillDismiss($event)" mode="ios">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-button (click)="cancel()">Cancel</ion-button>
        </ion-buttons>
        <ion-title>Préférences du voyage</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="confirm()" [strong]="true">Confirm</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <ion-label>Je préfère voyager avec des Conducteur / passager:</ion-label>
    </ion-content>
  </ng-template>
</ion-modal> -->

<ion-modal trigger="editProfile-content" (willDismiss)="onWillDismissEdit($event)" mode="ios">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-button (click)="cancelEdit()">Cancel</ion-button>
        </ion-buttons>
        <ion-title>Modifier profil</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="confirmEdit()" [strong]="true">Confirm</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <ion-list>
        <ion-list>
        <form [formGroup]="updateProfile">
          <ion-item>
            <ion-input label-placement="floating" class="textLarge" label="Nom" placeholder="Saisir votre nom" formControlName="nom"></ion-input>
          </ion-item>
        

          <ion-item>
            <ion-input label-placement="floating" class="textLarge" label="Sim 1" type="tel" formControlName="sim"></ion-input>
          </ion-item>

          <ion-label class="text ion-padding">Date de naissance</ion-label>
          <ion-item>
            <ion-icon class="bullet small" name="calendar-outline" slot="start"></ion-icon>
            <ion-input id="date" placeholder="{{updateProfile.value['dateNaissance'] | date}}"></ion-input>
            <ion-popover trigger="date">
              <ng-template>
                <ion-datetime formControlName="dateNaissance"></ion-datetime>
              </ng-template>
            </ion-popover>
          </ion-item>

        </form>
          <ion-radio-group [(ngModel)]="sexe">
            <ion-label class="textLarge">Je suis</ion-label>
          <br> 
          <ion-item>
            <ion-label class="textLarge">Homme</ion-label>
            <ion-icon name="male"></ion-icon>
            <ion-radio value="H"></ion-radio>
          </ion-item>
          <ion-item>
            <ion-label class="textLarge">Femme</ion-label>
            <ion-icon name="female"></ion-icon>
            <ion-radio value="F"></ion-radio>
          </ion-item>
          </ion-radio-group>

          <form [formGroup]="updateProfile">
          <ion-item lines="none">
            <ion-input label-placement="floating" class="textLarge" label="Description" placeholder="Enter text" formControlName="desc"></ion-input>
          </ion-item>
          </form>
        </ion-list>
      </ion-list>
    </ion-content>

  </ng-template>
</ion-modal>
